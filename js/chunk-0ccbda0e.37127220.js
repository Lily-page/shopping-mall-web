(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ccbda0e"],{"00ee":function(t,e,r){"use strict";var s=r("b622"),a=s("toStringTag"),n={};n[a]="z",t.exports="[object z]"===String(n)},"0210":function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.addressForm},on:{"update:visible":function(e){t.addressForm=e},close:t.cancel}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"姓名",prop:"name"}},[e("el-col",{attrs:{span:12}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),e("el-form-item",{attrs:{label:"手机号",prop:"tel"}},[e("el-col",{attrs:{span:12}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1)],1),e("el-form-item",{attrs:{label:"所在地区",required:""}},[e("el-col",{attrs:{span:23}},[e("el-cascader",{attrs:{size:"large",options:t.options,"show-all-levels":!0},on:{change:t.handleChange},model:{value:t.form.selectedOptions,callback:function(e){t.$set(t.form,"selectedOptions",e)},expression:"form.selectedOptions"}})],1)],1),e("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[e("el-col",{attrs:{span:23}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),e("el-form-item",{attrs:{label:"邮政编号"}},[e("el-col",{attrs:{span:8}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.zipcode,callback:function(e){t.$set(t.form,"zipcode",e)},expression:"form.zipcode"}})],1)],1),e("el-form-item",{attrs:{label:"设为默认",prop:"defaultAddress"}},[e("el-switch",{model:{value:t.form.defaultAddress,callback:function(e){t.$set(t.form,"defaultAddress",e)},expression:"form.defaultAddress"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(t._s(t.changeBtn))])],1)],1)},a=[],n=(r("d9e2"),r("ef6c")),i={props:{dialogForm:{type:Boolean,required:!0,default:!1},formData:{type:Object,default:()=>{}}},inject:["reload"],watch:{dialogForm:{handler(t){this.addressForm=t},immediate:!0},formData:{handler(t){t&&(this.form=t)},deep:!0}},computed:{title(){return("{}"==JSON.stringify(this.formData)?"添加":"编辑")+"收货地址"},changeBtn(){return"{}"==JSON.stringify(this.formData)?"确 定":"更 改"}},data(){let t=/^1[345789]\d{9}$/,e=(e,r,s)=>{if(!r)return s(new Error("请输入手机号码"));setTimeout(()=>{t.test(r)?s():s(new Error("手机格式有误"))},100)};return{addressForm:!1,options:n["regionData"],form:{name:"",tel:"",selectedOptions:[],region:"",address:"",zipcode:"",defaultAddress:!1},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,message:"收货人姓名不能小于2个字符",trigger:"blur"}],tel:[{required:!0,validator:e,trigger:"blur"}],address:[{required:!0,message:"街道地址不能为空",trigger:"blur"},{min:5,message:"街道地址不能小于5个字符",trigger:"blur"}]}}},methods:{async save(){this.form.zipcode=this.form.zipcode?this.form.zipcode:"000000","{}"==JSON.stringify(this.formData)?await this.$http.put("/addresses/"+this.form._id,this.form):await this.$http.post("/addresses",this.form),this.$emit("formSave",!1),this.reload()},cancel(){this.formData={},this.$emit("formClose",!1)},handleChange(t){let e="";(t||[]).map(t=>e+=n["CodeToText"][t]),this.form.region=e}}},o=i,c=(r("e69e"),r("2877")),l=Object(c["a"])(o,s,a,!1,null,"e589da9e",null);e["a"]=l.exports},"0d26":function(t,e,r){"use strict";var s=r("e330"),a=Error,n=s("".replace),i=function(t){return String(new a(t).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,c=o.test(i);t.exports=function(t,e){if(c&&"string"==typeof t&&!a.prepareStackTrace)while(e--)t=n(t,o,"");return t}},"10d6":function(t,e,r){},1787:function(t,e,r){"use strict";var s=r("861d");t.exports=function(t){return s(t)||null===t}},"1cd9":function(t,e,r){"use strict";r("62fb")},"1e43":function(t,e,r){"use strict";r("be4f")},"2ba4":function(t,e,r){"use strict";var s=r("40d5"),a=Function.prototype,n=a.apply,i=a.call;t.exports="object"==typeof Reflect&&Reflect.apply||(s?i.bind(n):function(){return i.apply(n,arguments)})},"3bbe":function(t,e,r){"use strict";var s=r("1787"),a=String,n=TypeError;t.exports=function(t){if(s(t))return t;throw new n("Can't set "+a(t)+" as a prototype")}},"577e":function(t,e,r){"use strict";var s=r("f5df"),a=String;t.exports=function(t){if("Symbol"===s(t))throw new TypeError("Cannot convert a Symbol value to a string");return a(t)}},"62fb":function(t,e,r){},"6f19":function(t,e,r){"use strict";var s=r("9112"),a=r("0d26"),n=r("b980"),i=Error.captureStackTrace;t.exports=function(t,e,r,o){n&&(i?i(t,e):s(t,"stack",a(r,o)))}},7156:function(t,e,r){"use strict";var s=r("1626"),a=r("861d"),n=r("d2bb");t.exports=function(t,e,r){var i,o;return n&&s(i=e.constructor)&&i!==r&&a(o=i.prototype)&&o!==r.prototype&&n(t,o),t}},7282:function(t,e,r){"use strict";var s=r("e330"),a=r("59ed");t.exports=function(t,e,r){try{return s(a(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(n){}}},a0aa:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("address-header"),e("address-box")],1)},a=[],n=function(){var t=this,e=t._self._c;return e("section",{staticClass:"address-header"},[e("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-plus"},on:{click:t.addAddress}},[t._v("新增收货地址")]),e("span",{staticClass:"address-tip"},[t._v(" 您已经保存了 "),e("span",{staticClass:"address-number"},[t._v(t._s(t.addressLength))]),t._v(" 个收货地址，还能保存 "),e("span",{staticClass:"address-number"},[t._v(t._s(t.restLength))]),t._v(" 个 ")]),e("address-form",{attrs:{dialogForm:t.dialogFormVisible,formData:t.formData},on:{formSave:function(e){t.dialogFormVisible=!1},formClose:function(e){t.dialogFormVisible=!1}}})],1)},i=[],o=r("0210"),c={components:{AddressForm:o["a"]},data(){return{dialogFormVisible:!1,addressLength:0,formData:{}}},computed:{restLength(){return 20-this.addressLength}},mounted(){this.$bus.$on("sendLength",t=>{this.addressLength=t})},methods:{addAddress(){this.dialogFormVisible=!0,this.formData={}}}},l=c,d=(r("1cd9"),r("2877")),u=Object(d["a"])(l,n,i,!1,null,"01be2390",null),f=u.exports,p=function(){var t=this,e=t._self._c;return e("section",[e("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.addressList,(function(r,s){return e("el-col",{key:s,staticClass:"address-col",attrs:{md:24}},[e("div",{staticClass:"ads-title clearfix"},[e("h1",{staticClass:"fl ads-name"},[t._v(t._s(r.name))]),e("div",{staticClass:"fr ads-del"},[e("a",{staticClass:"el-icon-close",on:{click:function(e){return t.delAddrress(r)}}})])]),e("div",{staticClass:"address-container clearfix"},[e("div",{staticClass:"address-item clearfix"},[e("span",{staticClass:"fl address-label"},[t._v("收货人：")]),e("div",{staticClass:"fl"},[t._v(t._s(r.name))])]),e("div",{staticClass:"address-item clearfix"},[e("span",{staticClass:"fl address-label"},[t._v("手机：")]),e("div",{staticClass:"fl"},[t._v(t._s(t._f("hideTel")(r.tel)))])]),e("div",{staticClass:"address-item clearfix"},[e("span",{staticClass:"fl address-label"},[t._v("所在地区：")]),e("div",{staticClass:"fl"},[t._v(t._s(r.region))])]),e("div",{staticClass:"address-item clearfix"},[e("span",{staticClass:"fl address-label"},[t._v("详细地址：")]),e("div",{staticClass:"fl"},[t._v(t._s(r.address))])]),e("div",{staticClass:"address-item clearfix"},[e("span",{staticClass:"fl address-label"},[t._v("邮编：")]),e("div",{staticClass:"fl"},[t._v(t._s(r.zipcode))])]),e("div",{staticClass:"fr address-operate"},[r.defaultAddress?t._e():e("a",{staticClass:"operate-btn",attrs:{href:"#"},on:{click:function(e){return t.handleDefault(r)}}},[t._v("设为默认")]),e("a",{staticClass:"operate-btn",on:{click:function(e){return t.editAddress(r)}}},[t._v("编辑")])])])])})),1),e("address-form",{attrs:{dialogForm:t.dialogFormVisible,formData:t.formData},on:{formSave:t.save,formClose:t.close}})],1)},m=[],h={components:{AddressForm:o["a"]},inject:["reload"],data(){return{addressList:[],dialogFormVisible:!1,formData:{}}},created(){this.getAddressList()},methods:{save(){this.dialogFormVisible=!1},close(){this.dialogFormVisible=!1},editAddress(t){this.dialogFormVisible=!0,this.formData=t},delAddrress(t){this.$confirm("确定要删除该收货地址吗?","删除",{confirmButtonText:"确定",cancelButtonClass:"取消",type:"warning"}).then(async()=>{await this.$http.delete("addresses/"+t._id);this.$message({type:"success",message:"删除成功！"}),this.reload()})},async handleDefault(t){t.defaultAddress=!t.defaultAddress,await this.$http.put("/addresses/"+t._id,t),this.reload()},async getAddressList(){const t=await this.$http.get("/addresses");this.addressList=(null===t||void 0===t?void 0:t.data)||[],this.$bus.$emit("sendLength",this.addressList.length)}}},b=h,v=(r("1e43"),Object(d["a"])(b,p,m,!1,null,"0d8acc1b",null)),g=v.exports,_={components:{AddressHeader:f,AddressBox:g}},y=_,x=Object(d["a"])(y,s,a,!1,null,null,null);e["default"]=x.exports},ab36:function(t,e,r){"use strict";var s=r("861d"),a=r("9112");t.exports=function(t,e){s(e)&&"cause"in e&&a(t,"cause",e.cause)}},aeb0:function(t,e,r){"use strict";var s=r("9bf2").f;t.exports=function(t,e,r){r in t||s(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},b980:function(t,e,r){"use strict";var s=r("d039"),a=r("5c6c");t.exports=!s((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",a(1,7)),7!==t.stack)}))},be4f:function(t,e,r){},d2bb:function(t,e,r){"use strict";var s=r("7282"),a=r("861d"),n=r("1d80"),i=r("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=s(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch(o){}return function(r,s){return n(r),i(s),a(r)?(e?t(r,s):r.__proto__=s,r):r}}():void 0)},d9e2:function(t,e,r){"use strict";var s=r("23e7"),a=r("da84"),n=r("2ba4"),i=r("e5cb"),o="WebAssembly",c=a[o],l=7!==new Error("e",{cause:7}).cause,d=function(t,e){var r={};r[t]=i(t,e,l),s({global:!0,constructor:!0,arity:1,forced:l},r)},u=function(t,e){if(c&&c[t]){var r={};r[t]=i(o+"."+t,e,l),s({target:o,stat:!0,constructor:!0,arity:1,forced:l},r)}};d("Error",(function(t){return function(e){return n(t,this,arguments)}})),d("EvalError",(function(t){return function(e){return n(t,this,arguments)}})),d("RangeError",(function(t){return function(e){return n(t,this,arguments)}})),d("ReferenceError",(function(t){return function(e){return n(t,this,arguments)}})),d("SyntaxError",(function(t){return function(e){return n(t,this,arguments)}})),d("TypeError",(function(t){return function(e){return n(t,this,arguments)}})),d("URIError",(function(t){return function(e){return n(t,this,arguments)}})),u("CompileError",(function(t){return function(e){return n(t,this,arguments)}})),u("LinkError",(function(t){return function(e){return n(t,this,arguments)}})),u("RuntimeError",(function(t){return function(e){return n(t,this,arguments)}}))},e391:function(t,e,r){"use strict";var s=r("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:s(t)}},e5cb:function(t,e,r){"use strict";var s=r("d066"),a=r("1a2d"),n=r("9112"),i=r("3a9b"),o=r("d2bb"),c=r("e893"),l=r("aeb0"),d=r("7156"),u=r("e391"),f=r("ab36"),p=r("6f19"),m=r("83ab"),h=r("c430");t.exports=function(t,e,r,b){var v="stackTraceLimit",g=b?2:1,_=t.split("."),y=_[_.length-1],x=s.apply(null,_);if(x){var C=x.prototype;if(!h&&a(C,"cause")&&delete C.cause,!r)return x;var w=s("Error"),k=e((function(t,e){var r=u(b?e:t,void 0),s=b?new x(t):new x;return void 0!==r&&n(s,"message",r),p(s,k,s.stack,2),this&&i(C,this)&&d(s,this,k),arguments.length>g&&f(s,arguments[g]),s}));if(k.prototype=C,"Error"!==y?o?o(k,w):c(k,w,{name:!0}):m&&v in x&&(l(k,x,v),l(k,x,"prepareStackTrace")),c(k,x),!h)try{C.name!==y&&n(C,"name",y),C.constructor=k}catch(A){}return k}}},e69e:function(t,e,r){"use strict";r("10d6")},f5df:function(t,e,r){"use strict";var s=r("00ee"),a=r("1626"),n=r("c6b6"),i=r("b622"),o=i("toStringTag"),c=Object,l="Arguments"===n(function(){return arguments}()),d=function(t,e){try{return t[e]}catch(r){}};t.exports=s?n:function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=d(e=c(t),o))?r:l?n(e):"Object"===(s=n(e))&&a(e.callee)?"Arguments":s}}}]);
//# sourceMappingURL=chunk-0ccbda0e.37127220.js.map