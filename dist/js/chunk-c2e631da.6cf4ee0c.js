(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2e631da"],{1518:function(t,e,r){},"1ca5":function(t,e,r){"use strict";r("e0d9")},4573:function(t,e,r){"use strict";r("c58f")},"47c5":function(t,e,r){"use strict";r("c849")},"99b9":function(t,e,r){"use strict";r("f5b9")},b1d9:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("order-nav"),e("order-main")],1)},s=[],o=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"personal-selector"},[e("ul",t._l(t.orderNav,(function(r,n){return e("li",{key:n,class:{active:t.underline==n},on:{click:function(e){return t.changeNav(n)}}},["trash"==n?e("a",{staticClass:"m-icons m-icons-trash-hover"}):t._e(),t._v(" "+t._s(r)+" ")])})),0)])])},a=[],i=r("cf45"),l={data(){return{orderNav:i["f"],underline:"allOrders"}},methods:{changeNav(t){this.underline=t,this.$bus.$emit("changeTable",i["g"][t])}}},c=l,d=(r("4573"),r("2877")),u=Object(d["a"])(c,o,a,!1,null,"55cfa6e5",null),f=u.exports,h=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"personal-main"},[e("order-table")],1)])},p=[],m=(r("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-list"},[t.orderList&&t.orderList.length?e("el-table",{staticStyle:{width:"100%","font-size":"12px"},attrs:{data:t.orderList,"header-cell-style":{background:"#eef1f6",textAlign:"center","font-size":"12px"},"cell-style":{textAlign:"center"}}},[e("el-table-column",{attrs:{prop:"outTradeNo",label:"商品"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("div",{staticClass:"row-header clearfix item"},[e("span",{staticClass:"row-header-date",attrs:{title:t._f("formatDate")(r.row.date)}},[t._v(t._s(t._f("formatDate")(r.row.date)))]),e("span",{staticClass:"row-header-number"},[t._v(" 订单号："),e("a",{staticClass:"cell-oprate",attrs:{href:"#"}},[t._v(t._s(r.row.outTradeNo))])]),e("a",{staticClass:"iconfont icon-lianximaijia",attrs:{href:"#",title:"联系客服"}}),e("a",{staticClass:"row-header-del m-icons m-icons-trash-hover",attrs:{title:"删除订单"},on:{click:function(e){return t.delOrder(r.row._id)}}})]),t._l(r.row.goods,(function(r,n){return e("div",{key:n,staticClass:"content-goods clearfix"},[e("div",{staticClass:"goods-img"},[e("img",{attrs:{src:r.goodsImageBig,alt:"商品图片"}})]),e("div",{staticClass:"goods-name",attrs:{title:r.goodsName}},[t._v(" "+t._s(r.goodsName)+" ")])])}))]}}],null,!1,1255755470)}),e("el-table-column",{attrs:{prop:"goods.salePrice",label:"单价",width:"80"},scopedSlots:t._u([{key:"default",fn:function(r){return t._l(r.row.goods,(function(r,n){return e("div",{key:n,staticClass:"content-item"},[t._v(t._s(r.salePrice))])}))}}],null,!1,3576383957)}),e("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(r){return t._l(r.row.goods,(function(r,n){return e("div",{key:n,staticClass:"content-item"},[t._v(t._s(r.goodsNum))])}))}}],null,!1,3150783589)}),e("el-table-column",{attrs:{prop:"salePrice",label:"实付款",width:"80"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("span",[t._v("¥")]),t._v(t._s(t._f("keepTwoNum")(t.total(r.row.goods)))+" ")]}}],null,!1,2572570535)}),e("el-table-column",{attrs:{prop:"orderState",label:"交易状态",width:"100",align:"bottom"},scopedSlots:t._u([{key:"default",fn:function(r){return[r.row.orderState>=3?e("div",[t._v("交易成功")]):t._e(),e("div",[t._v(t._s(t.showOrderState[r.row.orderState]))]),e("a",{staticClass:"cell-oprate",on:{click:function(e){return t.$router.push("/orderDetail/"+r.row._id)}}},[t._v("订单详情")])]}}],null,!1,3102038103)}),e("el-table-column",{attrs:{prop:"address",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(r){return[4==r.row.orderState&&5!=t.navTitleNum?e("a",{staticClass:"cell-oprate"},[t._v("追加评论")]):t._e(),1==r.row.orderState&&5!=t.navTitleNum?e("a",{staticClass:"cell-oprate",on:{click:function(e){return t.toPay(r.row)}}},[t._v("去支付")]):t._e(),2==r.row.orderState&&5!=t.navTitleNum?e("a",{staticClass:"cell-oprate",on:{click:function(e){return t.confirmOrder(r.row._id)}}},[t._v("确认收货")]):t._e(),3==r.row.orderState&&5!=t.navTitleNum?e("a",{staticClass:"cell-oprate",on:{click:function(e){return t.$router.push("/evaluation/"+r.row._id)}}},[t._v("去评价")]):t._e(),5==t.navTitleNum?e("a",{staticClass:"cell-oprate",on:{click:function(e){return t.recoverOrder(r.row._id)}}},[t._v("恢复订单")]):t._e()]}}],null,!1,628283423)})],1):e("order-empty")],1)}),v=[],_=r("2f62"),w=function(){var t=this;t._self._c;return t._m(0)},g=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-exception m-no-order"},[e("div",{staticClass:"e-img"}),e("p",{staticClass:"e-info"},[t._v("没有相应的订单数据")])])}],b=(r("99b9"),{}),y=Object(d["a"])(b,w,g,!1,null,"5e151d29",null),C=y.exports,O={components:{OrderEmpty:C},filters:{keepTwoNum(t){return t=Number(t),t.toFixed(2)}},data(){return{showOrderState:i["h"],orderList:[],multipleSelection:[],checked:!1,search:"",navTitleNum:0}},computed:{...Object(_["c"])(["login"])},watch:{navTitleNum:{handler(t){this.getOrderList()}}},mounted(){this.login?this.getOrderList():this.$router.push({path:"/login"}),this.$bus.$on("changeTable",t=>{this.navTitleNum=t})},methods:{async recoverOrder(t){await this.$http.post("/order/"+t),this.getOrderList()},total(t){let e=0;return t.forEach(t=>{e+=t.salePrice*t.goodsNum}),e},async toPay(t){let e={orderId:t.outTradeNo,total:String(this.total(t.goods))};const r=await this.$http.post("/pcAlipay",this.$qs.stringify(e),{headers:{"content-type":"application/x-www-form-urlencoded"}});window.location.href=r.data.result},confirmOrder(t){this.$confirm("确认收到货了吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await this.$http.delete("/confirmOrder/"+t),this.$message({type:"success",message:"收货成功，赶紧去评价吧!"}),this.getOrderList()})},delOrder(t){this.$confirm("确定要删除吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{5==this.navTitleNum?await this.$http.delete("/eliminateOrder/"+t):await this.$http.delete("/order/"+t),this.$message({type:"success",message:"删除成功!"}),this.getOrderList()})},async getOrderList(){var t;const e=await this.$http.get("/orderList/"+this.navTitleNum);this.orderList=null===(t=e.data)||void 0===t?void 0:t.orderList}}},k=O,N=(r("47c5"),r("1ca5"),Object(d["a"])(k,m,v,!1,null,"32e2e3b2",null)),T=N.exports,x={components:{OrderTable:T,OrderEmpty:C}},S=x,$=(r("c59b"),Object(d["a"])(S,h,p,!1,null,"bd01a46e",null)),L=$.exports,B={components:{OrderNav:f,orderMain:L}},P=B,j=Object(d["a"])(P,n,s,!1,null,null,null);e["default"]=j.exports},c58f:function(t,e,r){},c59b:function(t,e,r){"use strict";r("1518")},c849:function(t,e,r){},cf45:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"h",(function(){return i})),r.d(e,"g",(function(){return l})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return d}));const n={order:"我的订单",collection:"我的收藏",address:"地址管理"},s={order:"/personalCenter/orderList",collection:"/personalCenter/favorList",address:"/personalCenter/address"},o={"/personalCenter/orderList":"order","/personalCenter/favorList":"collection","/personalCenter/address":"address"},a={allOrders:"全部订单",pendingPayment:"待付款",toBeReceived:"待收货",toBeEvaluated:"待评价",trash:"订单回收站"},i={1:"待付款",2:"待收货",3:"待评价",4:"已评价"},l={allOrders:0,pendingPayment:1,toBeReceived:2,toBeEvaluated:3,trash:5},c={"多":"品类齐全,轻松购物","快":"多仓直发，极速配送","好":"正品行货，精致服务","省":"天天低价，畅选无忧"},d={"多":"mod_service_duo","快":"mod_service_kuai","好":"mod_service_hao","省":"mod_service_sheng"}},e0d9:function(t,e,r){},f5b9:function(t,e,r){}}]);
//# sourceMappingURL=chunk-c2e631da.6cf4ee0c.js.map