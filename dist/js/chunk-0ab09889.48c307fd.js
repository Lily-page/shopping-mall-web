(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ab09889"],{"0e40":function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"detail"},[s("div",{staticClass:"container"},[s("div",[s("div",{staticClass:"header clearfix"},[s("div",{staticClass:"banner clearfix"},[s("div",{staticClass:"main fl"},[s("img",{attrs:{src:t.goodsImageBig}})]),s("div",{staticClass:"thumb fr"},[s("div",{staticClass:"thumb-container"},t._l(t.goodsImageSmall,(function(i,a){return s("div",{key:a,staticClass:"thumb-pic",style:{"border-color":i===t.goodsImageBig?"rgb(132,95,63)":"rgb(236, 236, 236)"},on:{click:function(s){return t.handlerClick(i)}}},[s("img",{attrs:{src:i}})])})),0)])]),s("div",{staticClass:"sku-container"},[s("div",{staticClass:"name clearfix"},[s("div",{staticClass:"good-name fl"},[t._v(t._s(t.goods.goodsName))])]),s("div",{staticClass:"summary"},[t._v(t._s(t.goods.subTitle))]),s("div",{staticClass:"card"},[s("div",{staticClass:"price-line"},[s("h5",{staticClass:"sku-title"},[t._v("售价")]),s("div",{staticClass:"price"},[s("span",{staticClass:"money-symbol"},[t._v("¥")]),s("span",{staticClass:"value"},[t._v(t._s(Number(t.goods.salePrice).toFixed(2)))]),t.goods.salePrice?s("s",{staticClass:"market-price"},[t._v(t._s("¥"+Number(t.goods.marketPrice).toFixed(2)))]):t._e()])]),s("div",{staticClass:"service-line"},[s("h5",{staticClass:"sku-title"},[t._v("服务")]),t._m(0),s("div",{staticClass:"service"},t._l(t.goods.service,(function(i,a){return s("div",{key:a,staticClass:"service-item"},[s("a",{staticClass:"m-icons m-icons-service"}),s("span",{staticClass:"service-item-text"},[t._v(t._s(i))])])})),0)])]),s("div",{staticClass:"address-line"},[s("h5",{staticClass:"sku-title"},[t._v("配送地区")]),s("div",{staticClass:"address"},[s("div",[s("span",[t._v(t._s(t.deliveryArea))]),s("span",[t._v(" 有货")]),s("a",{on:{click:function(s){t.dialogFormVisible=!0}}},[t._v("修改")])])])]),s("div",[s("div",{staticStyle:{overflow:"hidden",padding:"0px 0px 12px"}}),s("div",{staticClass:"count-line"},[s("h5",{staticClass:"sku-title count-title"},[t._v("数量")]),s("div",{staticClass:"count-container"},[s("div",[s("div",{staticClass:"minus-btn",style:[{cursor:1===t.num?"not-allowed":"pointer"}],on:{click:function(s){1!==t.num&&t.subtractNum()}}},[s("div",{staticStyle:{width:"30px",height:"30px",transform:"scale(0.5)","line-height":"24px",cursor:"default"}},[s("svg",{attrs:{fill:"#ccc",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 4"}},[s("rect",{attrs:{width:"40",height:"4",rx:"2",ry:"2"}})])])]),s("input",{staticClass:"count-input",attrs:{type:"text"},domProps:{value:t.num}}),s("div",{staticClass:"minus-btn-active",style:[{cursor:t.num===t.goods.limitNum?"not-allowed":"pointer"}],on:{click:function(s){t.num!==t.goods.limitNum&&t.addNum()}}},[s("div",{staticStyle:{width:"30px",height:"30px",transform:"scale(0.5)",cursor:"default"}},[s("svg",{attrs:{fill:"#9f8052",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40"}},[s("path",{attrs:{d:"M38,17.1H22V2a2,2,0,0,0-4,0V17.1H2a2,2,0,0,0-2,2H0a2,2,0,0,0,2,2H18V38a2,2,0,0,0,4,0V21.1H38a2,2,0,0,0,2-2h0A2,2,0,0,0,38,17.1Z"}})])])])])])]),s("div",{staticClass:"virtual-line"})]),s("div",{staticClass:"btn-line"},[s("div",{staticClass:"buy-btn-container"},[s("a",{staticClass:"m-btns m-btn-middle m-btn-blue",on:{click:function(s){return t.addCar(t.goods._id,t.goods.salePrice,t.goods.goodsName,t.goodsImageBig)}}},[t._v("加入购物车")]),s("a",{staticClass:"m-btns m-btn-middle m-btn-blue-stroke",on:{click:function(s){return t.toSettlement(t.goods._id,t.goods.salePrice,t.goods.goodsName,t.goodsImageBig)}}},[t._v(" 立即购买 ")])]),t.isFavor?s("div",{staticClass:"remove-favor-btn",on:{click:function(s){return t.cancelFavor(t.goods._id)}}},[t._m(2)]):s("div",{staticClass:"favor-btn",on:{click:function(s){return t.addFavor(t.goods._id,t.goods.salePrice,t.goods.goodsName,t.goodsImageBig)}}},[t._m(1)])])])]),s("detail-content",{attrs:{detail:t.goods.detail}})],1)]),s("el-dialog",{attrs:{title:"配送地区",visible:t.dialogFormVisible},on:{"update:visible":function(s){t.dialogFormVisible=s}}},[s("div",[s("el-col",{attrs:{span:23}},[s("el-cascader",{attrs:{size:"large",options:t.options,"show-all-levels":!0},on:{change:t.handleChange},model:{value:t.selectedOptions,callback:function(s){t.selectedOptions=s},expression:"selectedOptions"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(s){t.dialogFormVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(s){t.dialogFormVisible=!1}}},[t._v("确 定")])],1)])],1)},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"introduce-container"},[s("p",{staticClass:"icon"},[t._v("!")])])},function(){var t=this,s=t._self._c;return s("div",[s("a",{staticClass:"m-icons m-icons-collection"}),s("p",[t._v("收藏")])])},function(){var t=this,s=t._self._c;return s("div",[s("a",{staticClass:"m-icons m-icons-collection"}),s("p",[t._v("取消收藏")])])}],o=(i("14d9"),i("2f62")),n=i("ef6c"),c=function(){var t=this,s=t._self._c;return s("div",{staticClass:"detail-content"},[s("div",{staticClass:"info fl"},[s("div",{staticClass:"nav-title"},[s("ul",{staticClass:"info-nav clearfix"},t._l(t.detail.detailType,(function(i,a){return s("li",{key:a,staticClass:"info-nav-item",on:{click:function(s){return t.changeNav(i,a)}}},[t._v(" "+t._s(i)+" ")])})),0),t._m(0)]),s("div",{staticClass:"main-body"},[t.detailShow==t.navList.goodsDetail?s("div",{staticClass:"body-content",domProps:{innerHTML:t._s(t.detail.goodsDetail)}}):t._e(),t.detailShow==t.navList.comment?s("div",[t.detail.comment&&t.detail.comment.length?s("comment",{attrs:{comment:t.detail.comment}}):s("div",{staticClass:"comment-no-data"},[s("div",{staticClass:"no-result"},[s("div",{staticClass:"no-comment-img"}),s("p",{staticClass:"no-comment-info"},[t._v("暂无评论")])])])],1):t._e(),t.detailShow==t.navList.parameter?s("div",[t._v("商品参数")]):t._e(),t.detailShow==t.navList.commonProblem?s("div",{staticClass:"body-content",domProps:{innerHTML:t._s(t.detail.commonProblem)}},[t._v(" 常见问题 ")]):t._e()])])])},l=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav-arr-container"},[s("div",{staticClass:"nav-arr",staticStyle:{left:"0",width:"128px"}})])}],d=function(){var t=this,s=t._self._c;return s("section",[s("div",[s("div",t._l(t.comment,(function(i,a){return s("div",{key:a,staticClass:"commentItem"},[s("div",{staticClass:"t-div"},[s("div",{staticClass:"myimg"},[s("img",{attrs:{src:i.avatar}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(i.username))]),t._m(0,!0)])]),s("div",{staticClass:"m-div"},[t._v(" "+t._s(i.content)+" ")]),s("div",{staticClass:"img-div"},[s("div",{staticClass:"imggroup-container"},[s("div",{staticClass:"imggroup-tabs-container clear-tl",staticStyle:{height:"40px"}},t._l(i.contentImg,(function(i,e){return s("div",{key:e,staticClass:"imggroup-tabs-item",staticStyle:{"margin-right":"4px",width:"40px",height:"40px"},on:{click:function(s){return t.selcetImg(i,a,e+1)}}},[s("img",{attrs:{src:i}})])})),0),t.imgSrc&&t.itemIdx==a&&t.imgIdx?s("div",{staticClass:"imggroup-select",staticStyle:{"min-height":"500px",width:"100%"}},[s("div",{staticClass:"imggroup-select-img"},[s("img",{staticStyle:{height:"auto",width:"281.32px"},attrs:{src:t.imgSrc,alt:""}})])]):t._e()])]),s("div",{staticClass:"b-div"})])})),0)])])},r=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"attach"},[s("span",[t._v("2022-03-31 16:01")]),s("span")])}],m={props:{comment:{type:Array,default:()=>[]}},data(){return{imgSrc:"",imgShow:"",itemIdx:-1,imgIdx:""}},methods:{selcetImg(t,s,i){this.imgSrc=t,this.itemIdx=s;let a=s+"-"+i;this.imgIdx=this.imgIdx==a?"":a}}},v=m,g=(i("d33d"),i("2877")),u=Object(g["a"])(v,d,r,!1,null,"59c05407",null),h=u.exports;const p={first:1,second:2,third:3,four:4},f={goodsDetail:"商品详情",comment:"评论",parameter:"产品参数",commonProblem:"常见问题"};var C={components:{Comment:h},props:{detail:{type:Object,default:()=>{}}},data(){return{detailShow:"商品详情",navList:f,navNum:p}},methods:{changeNav(t,s){let i=document.getElementsByClassName("nav-arr")[0];this.detailShow=t,i.style.left=0==s?"0px":128*s+1+"px"}}},_=C,b=(i("60f6"),Object(g["a"])(_,c,l,!1,null,"7a17c638",null)),y=b.exports,x={components:{DetailContent:y},data(){return{goods:{detail:{},_id:""},goodsImageSmall:[],goodsImageBig:"",num:1,isFavor:!1,deliveryArea:"",options:n["regionData"],selectedOptions:[],dialogFormVisible:!1}},computed:{...Object(o["c"])(["login"])},watch:{"goods._id":{handler(t){this.getFavor(t)}}},created(){this.getGoodsDetail()},methods:{handleChange(t){(t||[]).map(t=>this.deliveryArea+=n["CodeToText"][t]+" ")},toSettlement(t,s,i,a){const e=[{goodsId:t,salePrice:s,goodsName:i,goodsImageBig:a,goodsNum:this.num}];this.login?this.$router.push({path:"/settlement",query:{goodsList:JSON.stringify(e)}}):this.$router.push("/login")},addFavor(t,s,i,a){this.login?this.$confirm("确认收藏该宝贝？",{confirmButtonText:"保存"}).then(async()=>{await this.$http.post("/addFavor",{goodsId:t,salePrice:s,goodsName:i,goodsImageBig:a}),this.$message({type:"success",message:"收藏成功"}),this.getFavor(t)}).catch(t=>{this.$message({type:"info",message:"取消收藏"})}):this.$router.push("login")},async cancelFavor(t){await this.$http.post("/cancelFavor/"+t);this.getFavor(t)},async addCar(t,s,i,a){this.login?(await this.$store.dispatch("addItemToCarList",{goodsId:t,goodsNum:this.num}),this.$store.dispatch("getCarList"),this.$router.push({name:"addCarSuccess",params:{id:t,name:i,img:a}})):this.$router.push("login")},subtractNum(){this.num--},addNum(){this.num++},handlerClick(t){this.goodsImageBig=t},async getFavor(t){var s;const i=await this.$http.get("/favorList");this.isFavor=null===(s=i.data)||void 0===s?void 0:s.favorList.some(s=>s.goodsId==t)},async getGoodsDetail(){var t;const s=await this.$http.get("AllGoods/"+this.$route.query.goodsId);this.goods=s.data,this.goodsImageSmall=null===(t=s.data)||void 0===t?void 0:t.goodsImageSmall,this.goodsImageBig=this.goodsImageSmall[0]}}},w=x,I=(i("db8c"),Object(g["a"])(w,a,e,!1,null,"64656e80",null));s["default"]=I.exports},"13b3":function(t,s,i){},"60f6":function(t,s,i){"use strict";i("fc3d")},"647f":function(t,s,i){},d33d:function(t,s,i){"use strict";i("13b3")},db8c:function(t,s,i){"use strict";i("647f")},fc3d:function(t,s,i){}}]);
//# sourceMappingURL=chunk-0ab09889.48c307fd.js.map